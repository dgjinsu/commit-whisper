<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ»¤ν« - μ»¤λ°‹ μ”μ•½ μ΄λ ¥</title>
    <link th:href="@{/css/home.css}" rel="stylesheet">
    <link th:href="@{/css/history.css}" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <div th:replace="~{fragments/header :: header(user=${user})}"></div>

    <!-- Main Content -->
    <div class="container">
        <div class="page-header">
            <h1>μ»¤λ°‹ μ”μ•½ μ΄λ ¥</h1>
            <p class="page-description">LLMμΌλ΅ μƒμ„±λ μ»¤λ°‹ μ”μ•½ μ΄λ ¥μ„ ν™•μΈν•μ„Έμ”</p>
        </div>

        <!-- Stats -->
        <div class="history-stats">
            <div class="stat-badge">
                <span class="stat-label">μ΄ μ΄λ ¥</span>
                <span class="stat-value" th:text="${historyCount} + 'κ°'">0κ°</span>
            </div>
        </div>

        <!-- History List -->
        <div class="history-list-section">
            <div th:if="${histories != null && !histories.isEmpty()}" class="history-list">
                <a th:each="history : ${histories}" th:href="@{/history/{id}(id=${history.id()})}" class="history-card" style="text-decoration: none; display: block; color: inherit;">
                    <div class="history-card-header">
                        <div class="history-repo-info">
                            <div class="repo-badge">
                                <span class="repo-icon">π“</span>
                                <span class="repo-name" th:text="${history.repoOwner() + '/' + history.repoName()}"></span>
                            </div>
                            <div class="commit-sha" th:text="'SHA: ' + ${history.commitSha().substring(0, 7)}"></div>
                        </div>
                        <div class="history-date">
                            <span class="date-label">μ”μ•½ μƒμ„±μΌ</span>
                            <span class="date-value" th:text="${#temporals.format(history.createdAt(), 'yyyy-MM-dd HH:mm')}"></span>
                        </div>
                    </div>
                    
                    <div class="history-card-body">
                        <div class="summary-content" th:utext="${#strings.abbreviate(history.htmlSummary(), 200)}"></div>
                    </div>
                    
                    <div class="history-card-footer">
                        <div class="commit-date-info">
                            <span class="commit-date-label">μ»¤λ°‹ λ‚ μ§</span>
                            <span class="commit-date-value" th:text="${#temporals.format(history.commitDate(), 'yyyy-MM-dd HH:mm')}"></span>
                        </div>
                    </div>
                </a>
            </div>
            
            <div th:if="${histories == null || histories.isEmpty()}" class="empty-state">
                <div class="empty-icon">π“</div>
                <p class="empty-text">μ•„μ§ μƒμ„±λ μ»¤λ°‹ μ”μ•½μ΄ μ—†μµλ‹λ‹¤.</p>
                <p class="empty-hint">whisper μ»¤λ°‹μ΄ κ°μ§€λλ©΄ μλ™μΌλ΅ μ”μ•½μ΄ μƒμ„±λ©λ‹λ‹¤.</p>
            </div>
        </div>
    </div>

    <!-- Header Script -->
    <div th:replace="~{fragments/header :: headerScript}"></div>
</body>
</html>

